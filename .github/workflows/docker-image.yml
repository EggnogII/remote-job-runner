name: Build and Publish REST API Docker image

on:
  push:
    branches: [ "dev" ]

env:
  DOCKER_IMAGE_NAME: remote-job-runner-api
  ECR_REPO: eggnog-docker
  AWS_REGION: us-west-2

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - name: Checkout repo 
      uses: actions/checkout@v4

    - name: Create JSON manifest
      run: |
           echo '{
             "redis_host": "127.0.0.1",
             "redis_port": 6379,
             "redis_db": 0,
             "redis_password": null
           }' > config.json
      working-directory: ./api
      shell: bash